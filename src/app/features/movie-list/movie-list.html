<div class="p-4">
  <h1 class="text-2xl font-bold mb-4">Movie List</h1>

  <mat-form-field>
    <input matInput type="text" [(ngModel)]="search" />
    @if (search) {
      <button matSuffix matIconButton aria-label="Clear" (click)="search = ''">
        <mat-icon>close</mat-icon>
      </button>
    }
  </mat-form-field>

  @if (movies()?.data?.length === 0) {
    <p>No movies found.</p>
  } @else {
    <div class="flex flex-wrap gap-2">
      @for (movie of movies()?.data || []; track movie.id) {
        <div class="rounded-2xl shadow-lg basis-1/8">
          <img
            class="w-full h-64 object-cover"
            [src]="`http://localhost:1337${movie.poster.url}`"
            [alt]="movie.title"
          />
          <div class="p-4">
            <h2 class="text-md font-bold">{{ movie.title }}</h2>
            <p class="text-sm text-slate-600">{{ movie.releaseDate }}</p>
            <div>
              <p class="text-sm text-slate-600">{{ movie.rating }}</p>
            </div>
          </div>
        </div>
      }
    </div>
  }
</div>
